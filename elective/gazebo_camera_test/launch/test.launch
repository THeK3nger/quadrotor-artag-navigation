<?xml version="1.0"?>
<launch>
  
<remap from="quad0/camera/image_raw" to="usb_cam/image_raw"/>
<remap from="quad0/camera/camera_info" to="usb_cam/camera_info"/>

  <arg name="paused" default="false"/>
  <arg name="use_sim_time" default="true"/>
  <arg name="gui" default="true"/>
  <arg name="throttled" default="false"/>

  <!-- set use_sim_time flag -->
  <group if="$(arg use_sim_time)">
    <param name="/use_sim_time" value="true" />
  </group>

  <!-- start empty world -->
  <group>
      <!--<node name="gazebo" pkg="gazebo" type="gazebo" args="-u /home/marco/Documenti/ros_tutorials/empty.world" respawn="false" output="screen"/>-->
      <!--node name="gazebo" pkg="gazebo" type="gazebo" args="-u $(find gazebo_worlds)/worlds/empty.world" respawn="false" output="screen"/-->
      <node name="gazebo" pkg="gazebo" type="gazebo" args="-u $(find labrob_quad_gazebo)/worlds/emptyFuerte.world" respawn="false" output="screen"/>
  </group>




  <!-- start gui -->
  <group if="$(arg gui)">
    <node name="gazebo_gui" pkg="gazebo" type="gui" respawn="false" output="screen"/>
  </group>

<group if="$(arg gui)">
  <param name="quad_urdf" command="$(find xacro)/xacro.py '$(find labrob_quad_gazebo)/models/quadrotorWithCameraFuerte.xacro'" />
  <node name="spawn_quad0" pkg="gazebo" type="spawn_model" args="-urdf -param quad_urdf -model quad0 -x 0 -y 0 -z 2" respawn="false" output="screen" />



</group>

<node name="tag1" pkg="gazebo" type="spawn_model" args="-file $(find gazebo_camera_test)/urdf/ARtag.urdf -urdf -z 0.1 -model ARtag1" respawn="false" />

<node name="tag2" pkg="gazebo" type="spawn_model" args="-file $(find gazebo_camera_test)/urdf/ARtag2.urdf -urdf -z 0.1 -x 0.5 -model ARtag2" respawn="false" />

<node name="ar_pose" pkg="ar_pose" type="ar_multi" respawn="false" output="screen">
		<param name="marker_pattern_list" type="string" value="$(find gazebo_camera_test)/data/multi"/>
		<param name="threshold" type="int" value="100"/>
</node>

</launch>

